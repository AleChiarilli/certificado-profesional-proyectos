<!DOCTYPE html>


<html lang="es">
	
	<head>
		<meta charset="ISO-8859-1">
		<title>DESARROLLO WEB</title>
		
		<style type="text/css">
		
			p {
				color:orange;
				font-size:40px;
				font-weight:bolder;
				font-family:impact;
				font-style:italic;
			}		

		
			.pantalla {
				color:red;
				font-size:30px;
				font-weight:bolder;
				width:1200px;
				height:130px;
				padding:10px;
				border:2px solid blue;
				border-radius:25px;
				background-color:aqua;
			}
			
			.boton {
				width:200px;
				height:50px;
			}
		
		</style>
		
	</head>
	
		
	<body>
	
		<div align="center">

			<!-- 
					MEDIANTE FUNCIONES CALLBACKS SE PERMITE IMPLEMENTAR, HACER USO DE LA
					ASÍNCRONÍA, QUE ES BÁSICAMENTE UN "TE LO PIDO PERO NO ME ESPERO A QUE
					ME LO DES, PORQUE TENGO OTRAS MUCHAS COSAS QUE HACER Y NO PUEDO PERDER
					EL TIEMPO. ASÍ, CUANDO LO TENGAS ME AVISAS Y HABLAMOS NUEVAMENTE" 
			-->
			
			<h1> 2 - GENERAR Y MOSTRAR NÚMEROS - CON CALLBACK </h1>
			
			
			<div id="pantalla" class="pantalla"></div>
			
			
			<script type="text/javascript">
			
				const RANGO			= 10;	// [1..10]
				const NUMEROS 		= new Array();
				const VECES 		= 10;
				const PROHIBIDO		= 6;
				

				// 1. FUNCIÓN PRINCIPAL QUE EJECUTARÁ UNA PARTE DEL CÓDIGO Y EL RESTO LE PEDIRÁ A LA CALLBACK QUE LO HAGA POR ELLA(le pasa sus datos):
					
				function f_jugar(callback) {				// CALLBACK ... una función (código) pasada como parámetro a otra.
															//			... principal dice "oye callback, te paso los datos y te ocupas tú de hacerlo por mí".
															//			... ES UNA DELEGACIÓN, COMO LO QUE HACE LA FACHADA CON EL DAO EN BASES DE DATOS.
					let numero;
					
					while( (numero = parseInt(Math.random() * RANGO) + 1) != PROHIBIDO ) {
						NUMEROS.push(numero);
					}
					
					//alert("ARRAY NUMEROS (" + NUMEROS.length + ") \n" + NUMEROS);
									
					let mensaje;
					
					if(NUMEROS.length > 0) {
						callback(true, NUMEROS);		// SI NO SALIÓ EL 6 A LA PRIMERA ... AL MENOS 1 NÚMERO EN EL ARRAY
						
					} else {
						callback(false);				// SI SALIÓ EL 6 A LA PRIMERA ... NINGÚN NÚMERO.
					}					
				
										
					// OTRAS OPERACIONES (HAY NO HAY QUE ESPERAR A QUE SE COMPLETE TODO LO ANTERIOR - MODO ASÍNCRONO = NO BLOQUEANTE).
					document.getElementById("pantalla").innerHTML += "<p> !!! OTRAS OPERACIONES !!! </p>";					
					
				}

				
				
				
				
				// 2. DEFINICIÓN DE LA FUNCIÓN CALLBACK MEDIANTE LA NOTACIÓN DE FLECHA (ARROW):
					
				const callback = (siNo, datos) => {
					
					if(siNo) {
						document.getElementById("pantalla").innerHTML = datos;
						
					} else {
						document.getElementById("pantalla").innerHTML = " - NADA - ";
					}
					
				}
				
				
				
				
				
				// 3. EJECUTAR LA FUNCIÓN PRINCIPAL QUE USARÁ A LA CALLBACK RECIBIDA COMO PARÁMETRO PASÁNDOLE A ELLA LOS DATOS:
				//		UNA CPU HACE USO DE UN COPROCESADOR MATEMÁTICO (otro chip especializado) PARA QUE REALICE LOS CÁLCULOS 
				//			MATEMÁTICOS POR ÉL ... LA TARJETA GRÁFICA LO MISMO, AYUDA A LA CPU.
				
				f_jugar(callback);
				
			</script>
			
			
			<br/><br/><br/>
			
			
			<button class="boton" onclick="window.location.href=''">
				RECARGAR PÁGINA
			</button>
			
		</div>
		
	</body>
	
</html>